---
import type { ImageMetadata } from 'astro';
import type { HTMLAttributes } from 'astro/types';
import { Image } from 'astro:assets';

type Props = HTMLAttributes<'a'> & {
  title: string;
  description: string;
  image: ImageMetadata;
  color: string;
};

const {
  title,
  description,
  image,
  color,
  class: className,
  ...props
} = Astro.props;
---

<a
  class:list={[
    'group focus-visible:border-ring focus-visible:ring-ring/50 relative flex flex-col gap-2 overflow-hidden rounded-2xl p-2 outline-none focus-visible:ring-[3px]',
    'before:absolute before:inset-0 before:bg-radial-[circle_farthest-side_at_top] before:from-white/20 before:to-white/15 before:opacity-0 before:transition-opacity hover:before:opacity-100',
    'after:absolute after:inset-0 after:bg-radial-[circle_farthest-side_at_top] after:from-white/20 after:to-white/10 after:transition-opacity hover:after:opacity-0',
    className,
  ]}
  style={`--gradient-color:${color};`}
  {...props}
>
  <div
    class:list={[
      'relative z-10 flex aspect-3/2 items-end justify-center overflow-hidden rounded-lg px-5 md:px-10',
      'before:absolute before:inset-0 before:bg-radial-[circle_farthest-side_at_top] before:from-(--gradient-color) before:to-transparent before:opacity-0 before:transition-opacity before:duration-300 group-hover:before:opacity-100',
      'after:absolute after:inset-0 after:bg-black/60',
    ]}
  >
    <Image
      src={image}
      alt={description}
      class="z-10 aspect-video w-full rounded-t-lg md:translate-y-4 md:transition-transform md:duration-300 md:group-hover:translate-y-0"
    />
  </div>
  <div class="z-10 flex flex-col p-2 md:gap-2 md:p-6">
    <h3 class="text-lg font-semibold md:text-2xl">{title}</h3>
    <p class="text-muted-foreground truncate font-medium md:text-lg">
      {description}
    </p>
  </div>
</a>
