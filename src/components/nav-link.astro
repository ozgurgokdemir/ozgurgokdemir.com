---
import type { HTMLAttributes } from 'astro/types';
import LinkButton from '@/components/link-button.astro';

type Props = HTMLAttributes<'a'> & {
  id: string;
};

const { id, ...props } = Astro.props;
---

<LinkButton variant="ghost" size="sm" data-nav-link data-id={id} {...props}>
  <slot />
</LinkButton>

<script>
  const navLinks =
    document.querySelectorAll<HTMLAnchorElement>('[data-nav-link]');
  navLinks.forEach((navLink) => {
    navLink.addEventListener('click', (e) => {
      const isHome = window.location.pathname === '/';
      if (!isHome) return;
      e.preventDefault();
      const sectionId = navLink.getAttribute('data-id');
      if (!sectionId) return;
      const section = document.getElementById(sectionId);
      if (!section) return;
      section.scrollIntoView({ behavior: 'smooth' });
    });
  });
</script>
